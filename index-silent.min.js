"use strict";!function(){var n=function(n){this.buffer=n};n.prototype={begin:function(){return this.buffer.push("[").shift(),this},newItem:function(){return this.filled&&this.buffer.push(","),this.buffer.newline().indent(),this.filled=!0,this},add:function(t){return this.buffer.push(t instanceof n?t.buffer:t),this},end:function(){return this.buffer.unshift(),this.filled&&this.buffer.newline().indent(),this.buffer.push("]"),this}},window.ArrayBuilder=n}(),function(){var n=function(){this.buffer=[],this._indent=[]};n.prototype={indent:function(){return this.buffer.push(this._indent.join("")),this},shift:function(){return this._indent.push("  "),this},unshift:function(){return this._indent.pop(),this},getIndentLevel:function(){return this._indent.length},push:function(n){return this===n?n:(this.pushValue(n),this)},pushValue:function(n){return this.buffer.push(n),this},newline:function(){return this.buffer.push("\n"),this},print:function(){return this.buffer.join("")}},window.StreamBuffer=n}(),function(){var n=function(n){var t=n.indexOf("("),e=n.indexOf(")"),i=n.substring(t+1,e).trim();return i?i.split(",").map(function(n){return n.trim()}):[]},t=function(n){var t=n.indexOf("{"),e=n.indexOf("}"),i=n.substring(t+1,e).trim();return i?i.split("\n").map(function(n){return n.trim()}):[]},e=function(e){return{params:n(e),lines:t(e)}};window.functionParseUtils={parse:e,parseBody:t,parseParams:n}}(),function(){var n=function(n){this.buffer=n};n.prototype={begin:function(){return this.buffer.push("function ("),this},params:function(n){return this.buffer.push(n.join(",")),this},body:function(n){this.buffer.push(") {"),this.buffer.shift();var t=this;return n.forEach(function(n){t.bodyLine(n)}),this},bodyLine:function(n){return this.filled=!0,this.buffer.newline().indent().push(n),this},end:function(){return this.buffer.unshift(),this.filled&&this.buffer.newline().indent(),this.buffer.push("}"),this}};var t=function(t){n.call(this,t)};t.prototype=Object.create(n.prototype),t.prototype.begin=function(){return this.buffer.push('<span class="function">'),n.prototype.begin.call(this)},t.prototype.end=function(){return n.prototype.end.call(this),this.buffer.push("</span>"),this},window.FunctionBuilder=n,window.HtmlFunctionBuilder=t}(),function(){var n=function(n){this.buffer=n};n.prototype={begin:function(){return this.buffer.push("{").shift(),this},_printKey:function(n){return this.buffer.push(n.toString()),this},key:function(n){return this.filled&&this.buffer.push(","),this.buffer.newline().indent(),this.filled=!0,this._printKey(n),this.buffer.push(": "),this},value:function(t){return this.buffer.push(t instanceof n?t.buffer:t),this},add:function(n,t){return this.key(n).value(t)},end:function(){return this.buffer.unshift(),this.filled&&this.buffer.newline().indent(),this.buffer.push("}"),this}};var t=function(t){n.call(this,t)};t.prototype=Object.create(n.prototype),t.prototype._printKey=function(n){return this.buffer.push('<span class="key">').push(n.toString()).push("</span>"),this},window.ObjectBuilder=n,window.HtmlObjectBuilder=t}(),function(){var n=function(n){this.buffer=n};n.prototype={add:function(n){this.filled&&(this.buffer.shift(),this.buffer.indent(),this.buffer.unshift()),this.filled=!0;var t,e=typeof n;switch(e){case"undefined":t='<span class="undefined">undefined</span>';break;case"number":t=window.isNaN(n)?'<span class="NaN">NaN</span>':n===1/0||n===-(1/0)?'<span class="number">'+(n===-(1/0)?"-":"")+"Infinity</span>":'<span class="'+e+'">'+n+"</span>";break;case"string":t='<span class="'+e+'">"'+n+'"</span>';break;case"null":case"boolean":t='<span class="'+e+'">'+n+"</span>";break;case"symbol":t='<span class="'+e+'">'+n.toString()+"</span>";break;case"object":if(null===n){t='<span class="null">'+n+"</span>";break}default:throw new Error("Unknown primitive type: "+e)}this.buffer.push(t)}},window.PrimitiveBuilder=n}(),function(n){function t(n,t){var e=new window.HtmlFunctionBuilder(t),i=window.functionParseUtils.parse(n.toString());e.begin().params(i.params).body(i.lines).end()}var e=5,i=function(n){return n instanceof Error&&(n=n.message),'<span class="error">'+n.toString()+"</span>"},r=function(n,t){new window.PrimitiveBuilder(t).add(n)},s=function(n,t){var e=new window.ArrayBuilder(t);e.begin();for(var i=0;i<n.length;i++)e.newItem().add(f(n[i],t));e.end()},o=function(n,t){var e=new window.HtmlObjectBuilder(t);e.begin();for(var i in n)e.key(i).value(f(n[i],t));e.end()},u=function(n,t){return Array.isArray(n)?s(n,t):o(n,t)},f=function(n,i){if(i=i||new window.StreamBuffer,i.getIndentLevel()>=e&&(n="..."),i.buffer.length>10240)return i;switch(typeof n){case"function":t(n,i);break;case"object":if(null!==n){u(n,i);break}default:r(n,i)}return i},c=function(n,t){var e="log: ";return t?e+=i(n[0]):n.forEach(function(t,r){e+=t instanceof Error?i(n[0]):f(t).print(),r<n.length-1&&(e+="\t")}),e+"\n\n\n"},a=function(n){n.classList.add("console-container"),n.innerHTML='<pre class="console-container__code"></pre>';var t=n.querySelector(".console-container__code");if(!t)throw Error("Console is not inited!");var i={};return i.log=function(){var n=Array.prototype.slice.call(arguments);t.innerHTML+=c(n),"function"==typeof i.onlog&&i.onlog(n)},i.error=function(n){t.innerHTML+=c([n],!0)},i.clean=function(){t.innerHTML=""},i.getLogSource=function(){return n.innerHTML},i.logDeep=function(n,t){t=t||e;var r=e;try{e=t,i.log(n)}finally{e=r}},i.extend=function(n){return n.log=i.log,n.info=i.log,n.error=i.error,n.warn=i.error,n.dir=i.logDeep,n},i};n.jsConsoleInit=a}(window),function(n){var t=[],e=function(n){t.push(n)};n.onerror=e,n.console.warn=e,n.console.error=e;var i=[],r=function(n){i.push(n)};n.console.info=r,n.console.log=r,n.console.debug=r;var s=function(){var e=n.document.createElement("div"),r=n.jsConsoleInit(e);n.document.body.appendChild(e),r.extend(n.console),t.forEach(function(n){r.error(n)}),i.forEach(function(n){r.log(n)}),n.onerror=function(n){r.error(n)}},o=function(){var t=n.document.createElement("link");t.rel="stylesheet",t.href="//htmlacademy.github.io/demo-console/lib/index.css",n.document.head.appendChild(t)};window.addEventListener("DOMContentLoaded",function(){s(),o()})}(window);